<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="page-title">Page — Hedax en Vadrouille</title>
  <meta id="page-description" name="description" content="" />
  <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
  <header class="site-header container">
    <a href="/" class="logo">Hedax <span>en Vadrouille</span></a>
    <nav class="nav">
      <a href="/">Accueil</a>
      <a href="/page/a-propos">À propos</a>
      <a href="/page/contact">Contact</a>
      <a href="/admin">Éditer</a>
    </nav>
  </header>

  <main class="container">
    <article id="page-article" class="page-article">
      <h1 id="title" class="title">Chargement…</h1>
      <div id="content"></div>
    </article>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <p>© <span id="year"></span> Hedax en Vadrouille</p>
      <p><a href="/page/mentions-legales">Mentions légales</a> · <a href="/page/confidentialite">Confidentialité</a></p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/gray-matter@4.0.3/dist/gray-matter.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    (function() {
      const params = new URLSearchParams(window.location.search);
      const slug = params.get('slug');
      const titleEl = document.getElementById('title');
      const contentEl = document.getElementById('content');
      const yearEl = document.getElementById('year');
      yearEl.textContent = new Date().getFullYear();

      fetch(`/content/pages/${slug}.md`)
        .then(r => r.ok ? r.text() : Promise.reject('Page introuvable'))
        .then(txt => {
          const parsed = window.grayMatter(txt);
          const data = parsed.data || {};
          titleEl.textContent = data.title || slug;
          document.getElementById('page-title').textContent = (data.title ? data.title + " — " : "") + "Hedax en Vadrouille";
          if (data.seo_description) {
            document.getElementById('page-description').setAttribute('content', data.seo_description);
          }
          contentEl.innerHTML = window.marked.parse(parsed.content || '');
        })
        .catch(() => titleEl.textContent = "Page introuvable 🤷‍♂️");
    })();
  </script>
</body>
</html>
